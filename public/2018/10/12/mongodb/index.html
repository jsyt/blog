<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>GOYTH  | MongoDB 知识点梳理（一）</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.65.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    

    
      
<link rel="shortcut icon" href="/https://img-1256541035.cos.ap-shanghai.myqcloud.com/imgs/favicon-red-bird.png" type="image/x-icon" />

    

    
    
    <meta property="og:title" content="MongoDB 知识点梳理（一）" />
<meta property="og:description" content="MongoDB知识点梳理(一)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://goyth.cn/2018/10/12/mongodb/" />
<meta property="article:published_time" content="2018-10-12T21:53:54+08:00" />
<meta property="article:modified_time" content="2018-10-12T21:53:54+08:00" />
<meta itemprop="name" content="MongoDB 知识点梳理（一）">
<meta itemprop="description" content="MongoDB知识点梳理(一)">
<meta itemprop="datePublished" content="2018-10-12T21:53:54&#43;08:00" />
<meta itemprop="dateModified" content="2018-10-12T21:53:54&#43;08:00" />
<meta itemprop="wordCount" content="685">



<meta itemprop="keywords" content="Database,MongoDB," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MongoDB 知识点梳理（一）"/>
<meta name="twitter:description" content="MongoDB知识点梳理(一)"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://goyth.cn/" class="f3 fw2 hover-white no-underline white-90 dib">
      GOYTH
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Articles page">
              Articles
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
        </ul>
      
      




<a href="https://twitter.com/goythz" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>





<a href="https://github.com/jsyt" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        ARTICLES
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://goyth.cn/2018/10/12/mongodb/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://goyth.cn/2018/10/12/mongodb/&amp;text=MongoDB%20%e7%9f%a5%e8%af%86%e7%82%b9%e6%a2%b3%e7%90%86%ef%bc%88%e4%b8%80%ef%bc%89" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://goyth.cn/2018/10/12/mongodb/&amp;title=MongoDB%20%e7%9f%a5%e8%af%86%e7%82%b9%e6%a2%b3%e7%90%86%ef%bc%88%e4%b8%80%ef%bc%89" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>

      <h1 class="f1 athelas mt3 mb1">MongoDB 知识点梳理（一）</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2018-10-12T21:53:54&#43;08:00">October 12, 2018</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy avenir bg-near-white f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h3 id="mongodb介绍">MongoDB介绍</h3>
<p>MongoDB是一个基于分布式文件存储的开源数据库系统。在高负载的情况下，添加更多的节点，可以保证服务器性能。
MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。
MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</p>
<h3 id="mongodb-基本概念">MongoDB 基本概念</h3>
<h4 id="数据库">数据库</h4>
<p>MongoDB的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。</p>
<p>&ldquo;show dbs&rdquo; 命令可以显示所有数据的列表。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./mongo
MongoDB shell version: 3.0.6
connecting to: <span style="color:#8be9fd;font-style:italic">test</span>
&gt; show dbs
admin  0.000GB
<span style="color:#8be9fd;font-style:italic">local</span>  0.078GB
<span style="color:#8be9fd;font-style:italic">test</span>   0.078GB
&gt;
</code></pre></div><p>执行 &ldquo;db&rdquo; 命令可以显示当前数据库对象或集合。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./mongo
MongoDB shell version: 3.0.6
connecting to: <span style="color:#8be9fd;font-style:italic">test</span>
&gt; db
<span style="color:#8be9fd;font-style:italic">test</span>
&gt;
</code></pre></div><p>运行&quot;use&quot;命令，可以连接到一个指定的数据库。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; use <span style="color:#8be9fd;font-style:italic">local</span>
switched to db <span style="color:#8be9fd;font-style:italic">local</span>
&gt; db
<span style="color:#8be9fd;font-style:italic">local</span>
&gt;
</code></pre></div><p>数据库名可以是满足以下条件的任意UTF-8字符串。</p>
<ul>
<li>不能是空字符串（&quot;&quot;)。</li>
<li>不得含有&rsquo; &lsquo;（空格)、.、$、/、\和\0 (空字符)。</li>
<li>应全部小写。</li>
<li>最多64字节。</li>
<li>有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</li>
</ul>
<p><strong>admin</strong>： 从权限的角度来看，这是&quot;root&quot;数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。
<strong>local</strong>: 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合
config: 当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</p>
<h4 id="文档">文档</h4>
<p>文档是一组键值(key-value)对(即BSON)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。</p>
<h4 id="rdbms关系型数据库与mongodb对应术语">RDBMS（关系型数据库）与MongoDB对应术语</h4>
<table>
<thead>
<tr>
<th align="center">RDBMS</th>
<th align="center">MongoDB</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">数据库</td>
<td align="center">数据库</td>
</tr>
<tr>
<td align="center">表格</td>
<td align="center">集合</td>
</tr>
<tr>
<td align="center">行</td>
<td align="center">文档</td>
</tr>
<tr>
<td align="center">列</td>
<td align="center">字段</td>
</tr>
<tr>
<td align="center">表联合</td>
<td align="center">嵌入文档</td>
</tr>
<tr>
<td align="center">主键</td>
<td align="center">主键 (MongoDB 提供了 key 为 _id )</td>
</tr>
</tbody>
</table>
<p>需要注意的是：</p>
<ul>
<li>文档中的键/值对是有序的。</li>
<li>文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚- 至可以是整个嵌入的文档)。</li>
<li>MongoDB区分类型和大小写。</li>
<li>MongoDB的文档不能有重复的键。</li>
<li>文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符。</li>
</ul>
<h4 id="文档键命名规范">文档键命名规范：</h4>
<ul>
<li>键不能含有\0 (空字符)。这个字符用来表示键的结尾。</li>
<li>.和$有特别的意义，只有在特定环境下才能使用。</li>
<li>以下划线&rdquo;_&ldquo;开头的键是保留的(不是严格要求的)。</li>
</ul>
<h4 id="集合">集合</h4>
<p>集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System)中的表格。
集合存在于数据库中，集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。</p>
<h4 id="mongodb-数据类型">MongoDB 数据类型</h4>
<table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">String</td>
<td align="center">字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</td>
</tr>
<tr>
<td align="center">Integer</td>
<td align="center">整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</td>
</tr>
<tr>
<td align="center">Boolean</td>
<td align="center">布尔值。用于存储布尔值（真/假）。</td>
</tr>
<tr>
<td align="center">Double</td>
<td align="center">双精度浮点值。用于存储浮点值。</td>
</tr>
<tr>
<td align="center">Min/Max keys</td>
<td align="center">将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</td>
</tr>
<tr>
<td align="center">Array</td>
<td align="center">用于将数组或列表或多个值存储为一个键。</td>
</tr>
<tr>
<td align="center">Timestamp</td>
<td align="center">时间戳。记录文档修改或添加的具体时间。</td>
</tr>
<tr>
<td align="center">Object</td>
<td align="center">用于内嵌文档。</td>
</tr>
<tr>
<td align="center">Null</td>
<td align="center">用于创建空值。</td>
</tr>
<tr>
<td align="center">Symbol</td>
<td align="center">符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。</td>
</tr>
<tr>
<td align="center">Date</td>
<td align="center">日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</td>
</tr>
<tr>
<td align="center">Object ID</td>
<td align="center">对象 ID。用于创建文档的 ID。</td>
</tr>
<tr>
<td align="center">Binary Data</td>
<td align="center">二进制数据。用于存储二进制数据。</td>
</tr>
<tr>
<td align="center">Code</td>
<td align="center">代码类型。用于在文档中存储 JavaScript 代码。</td>
</tr>
<tr>
<td align="center">Regular expression</td>
<td align="center">正则表达式类型。用于存储正则表达式。</td>
</tr>
</tbody>
</table>
<h4 id="objectid">ObjectId</h4>
<p>ObjectId 类似唯一主键，可以很快的去生成和排序，包含 12 bytes，含义是：</p>
<p>前 4 个字节表示创建 unix 时间戳,格林尼治时间 UTC 时间，比北京时间晚了 8 个小时
接下来的 3 个字节是机器标识码
紧接的两个字节由进程 id 组成 PID
最后三个字节是随机数</p>
<p>MongoDB 中存储的文档必须有一个 _id 键。这个键的值可以是任何类型的，默认是个 ObjectId 对象</p>
<p>由于 ObjectId 中保存了创建的时间戳，所以你不需要为你的文档保存时间戳字段，你可以通过 getTimestamp 函数来获取文档的创建时间:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; ObjectId<span style="color:#ff79c6">()</span>.getTimestamp<span style="color:#ff79c6">()</span>
ISODate<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;2018-10-12T14:07:33Z&#34;</span><span style="color:#ff79c6">)</span>
&gt;
</code></pre></div><h3 id="数据库操作">数据库操作</h3>
<h4 id="创建数据库">创建数据库</h4>
<pre><code>use database_name     // database_name代表数据库的名字
</code></pre><p>如果数据库不存在，则创建数据库，否则切换到指定数据库。</p>
<h4 id="查看数据库">查看数据库</h4>
<h5 id="查看所有数据库">查看所有数据库</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">show dbs
</code></pre></div><h4 id="查看当前数据库">查看当前数据库</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db
<span style="color:#6272a4">// 或者
</span><span style="color:#6272a4"></span>db.getName()
</code></pre></div><h4 id="删除数据库">删除数据库</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.dropDatabase()
</code></pre></div><h4 id="创建集合">创建集合</h4>
<h5 id="创建一个空集合">创建一个空集合</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.createCollection(collection_Name)
<span style="color:#6272a4">//collection_Name集合的名称
</span></code></pre></div><h5 id="创建集合并插入一个文档">创建集合并插入一个文档</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//collection_Name集合的名称
</span><span style="color:#6272a4">//document要插入的文档
</span><span style="color:#6272a4"></span>db.collection_Name.insert(<span style="color:#8be9fd;font-style:italic">document</span>)
</code></pre></div><h4 id="插入文档">插入文档</h4>
<h5 id="insert">insert</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.insert(<span style="color:#8be9fd;font-style:italic">document</span>)
</code></pre></div><p><strong>参数</strong></p>
<ul>
<li>collection_name 集合的名字</li>
<li>document 插入的文档</li>
</ul>
<blockquote>
<p>每当插入一条新文档的时候mongodb会自动为此文档生成一个_id属性,_id一定是唯一的，用来唯一标识一个文档 _id也可以直接指定，但如果数据库中此集合下已经有此_id的话插入会失败</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.insert({_id<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nInserted&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> })
<span style="color:#ff79c6">&gt;</span> db.students.insert({_id<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="save">save</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.save(<span style="color:#8be9fd;font-style:italic">document</span>)
</code></pre></div><p><strong>参数</strong></p>
<ul>
<li>collection_name 集合的名字</li>
<li>document 插入的文档</li>
</ul>
<blockquote>
<p>注：如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。</p>
</blockquote>
<p>实例</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.save({_id<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nMatched&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span>, <span style="color:#f1fa8c">&#34;nUpserted&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>, <span style="color:#f1fa8c">&#34;nModified&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span> })
<span style="color:#ff79c6">&gt;</span> db.students.save({_id<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">100</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nMatched&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span>, <span style="color:#f1fa8c">&#34;nUpserted&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>, <span style="color:#f1fa8c">&#34;nModified&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> })
</code></pre></div><h4 id="更新文档">更新文档</h4>
<pre><code>db.collection.update(
   &lt;query&gt;,
   &lt;updateObj&gt;,
   {
     upsert: &lt;boolean&gt;,
     multi: &lt;boolean&gt;
   }
)
</code></pre><p><strong>参数说明</strong></p>
<ul>
<li>query 查询条件,指定要更新符合哪些条件的文档</li>
<li>updateObj 更新后的对象或指定一些更新的操作符
<ul>
<li>$set 直接指定更新后的值</li>
<li>$inc 在原基础上累加</li>
<li>$unset 删除指定的键</li>
<li>$push 向数组中添加元素</li>
</ul>
</li>
<li>upsert 可选，这个参数的意思是，如果不存在符合条件的记录时是否插入updateObj. 默认是false,不插入。</li>
<li>multi 可选，mongodb 默认只更新找到的第一条记录，如果这个参数为true,就更新所有符合条件的记录。
实例 将students集合中数据中name是luke2的值修改为luke22</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.update({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke2&#39;</span>},{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">300</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nMatched&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span>, <span style="color:#f1fa8c">&#34;nUpserted&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>, <span style="color:#f1fa8c">&#34;nModified&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> })
</code></pre></div><p>注：如果有多条name是luke2的数据只更新一条,如果想全部更新需要指定{multi:true}的参数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.update({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke2&#39;</span>},{$set<span style="color:#ff79c6">:</span>{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">300</span>}},{multi<span style="color:#ff79c6">:</span><span style="color:#ff79c6">true</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nMatched&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span>, <span style="color:#f1fa8c">&#34;nUpserted&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>, <span style="color:#f1fa8c">&#34;nModified&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> })
</code></pre></div><h3 id="runcommand">runCommand</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"> <span style="color:#8be9fd;font-style:italic">var</span> modify <span style="color:#ff79c6">=</span> {
    findAndModify<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;student&#39;</span>,
    query<span style="color:#ff79c6">:</span>{name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;张三&#39;</span>},
    update<span style="color:#ff79c6">:</span>{$set<span style="color:#ff79c6">:</span>{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">100</span>}},
    fields<span style="color:#ff79c6">:</span>{name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;1&#39;</span>},
    sort<span style="color:#ff79c6">:</span><span style="color:#ff79c6">true</span>,
    <span style="color:#ff79c6">new</span><span style="color:#ff79c6">:</span><span style="color:#ff79c6">true</span> <span style="color:#6272a4">//返回修改后的值
</span><span style="color:#6272a4"></span>}

<span style="color:#8be9fd;font-style:italic">var</span> result <span style="color:#ff79c6">=</span> db.runCommand(modify);
printjson(result);
</code></pre></div><h4 id="文档的删除">文档的删除</h4>
<p><strong>remove</strong>方法是用来移除集合中的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection.remove(
   <span style="color:#ff79c6">&lt;</span>query<span style="color:#ff79c6">&gt;</span>,
   {
     justOne<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">boolean</span><span style="color:#ff79c6">&gt;</span>
   }
)
</code></pre></div><p>参数说明</p>
<ul>
<li>query :（可选）删除的文档的条件。</li>
<li>justOne : （可选）如果设为 true 或 1，则只删除匹配到的多个文档中的第一个</li>
</ul>
<p>实例 删除worker集合里name是luke2的所有文档数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.remove({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke2&#39;</span>});
WriteResult({ <span style="color:#f1fa8c">&#34;nRemoved&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span> })
</code></pre></div><p>即使匹配多条也只删除一条</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.remove({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#34;luke2&#34;</span>},{justOne<span style="color:#ff79c6">:</span><span style="color:#ff79c6">true</span>})
WriteResult({ <span style="color:#f1fa8c">&#34;nRemoved&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> })
</code></pre></div><h4 id="查询文档">查询文档</h4>
<h4 id="find">find</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.find()
</code></pre></div><p><strong>参数</strong></p>
<ul>
<li>collection_name 集合的名字</li>
</ul>
<p>查询students下所有的文档</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find()
</code></pre></div><h4 id="查询指定列">查询指定列</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.find({queryWhere},{key<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,key<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>})
</code></pre></div><p><strong>参数</strong></p>
<ul>
<li>collection_name 集合的名字</li>
<li>queryWhere 参阅查询条件操作符</li>
<li>key 指定要返回的列</li>
<li>1 表示要显示</li>
</ul>
<p>只返回显示age列</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.find({},{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="findone">findOne</h4>
<p>查询匹配结果的第一条数据 语法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.findOne()
</code></pre></div><p>实例</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.findOne()
</code></pre></div><h4 id="in">$in</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.student.find({age<span style="color:#ff79c6">:</span>{$in<span style="color:#ff79c6">:</span>[<span style="color:#bd93f9">30</span>,<span style="color:#bd93f9">100</span>]}},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="nin">$nin</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.student.find({age<span style="color:#ff79c6">:</span>{$nin<span style="color:#ff79c6">:</span>[<span style="color:#bd93f9">30</span>,<span style="color:#bd93f9">100</span>]}},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="nin-1">$nin</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.student.find({age<span style="color:#ff79c6">:</span>{$in<span style="color:#ff79c6">:</span>[<span style="color:#bd93f9">30</span>,<span style="color:#bd93f9">100</span>]}},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="not">$not</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.student.find({age<span style="color:#ff79c6">:</span>{$not<span style="color:#ff79c6">:</span>{$gte<span style="color:#ff79c6">:</span><span style="color:#bd93f9">20</span>,$lte<span style="color:#ff79c6">:</span><span style="color:#bd93f9">30</span>}}});
</code></pre></div><h4 id="array">array</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//按所有元素匹配
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>[ <span style="color:#f1fa8c">&#34;Lufy&#34;</span>, <span style="color:#f1fa8c">&#34;Nami2&#34;</span>, <span style="color:#f1fa8c">&#34;Wusopu&#34;</span>, <span style="color:#f1fa8c">&#34;A&#34;</span> ]});
<span style="color:#6272a4">//匹配一条
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#34;A&#34;</span>});
<span style="color:#6272a4">//$all
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>{$all<span style="color:#ff79c6">:</span>[<span style="color:#f1fa8c">&#39;A&#39;</span>,<span style="color:#f1fa8c">&#34;Lufy&#34;</span>]}});
<span style="color:#6272a4">//$in
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>{$in<span style="color:#ff79c6">:</span>[<span style="color:#f1fa8c">&#39;A&#39;</span>,<span style="color:#f1fa8c">&#34;Lufy&#34;</span>]}});
<span style="color:#6272a4">//$size
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>{$size<span style="color:#ff79c6">:</span><span style="color:#bd93f9">4</span>}});
<span style="color:#6272a4">//$slice
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>{$size<span style="color:#ff79c6">:</span><span style="color:#bd93f9">5</span>}},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,friends<span style="color:#ff79c6">:</span>{$slice<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>}});
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> db.student.find({friends<span style="color:#ff79c6">:</span>{$size<span style="color:#ff79c6">:</span><span style="color:#bd93f9">5</span>}},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,friends<span style="color:#ff79c6">:</span>{$slice<span style="color:#ff79c6">:-</span><span style="color:#bd93f9">1</span>}});
</code></pre></div><h4 id="where">where</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.student.find({$where<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#34;this.age&gt;30&#34;</span>},{name<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>});
</code></pre></div><h4 id="cursor">cursor</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">var</span> result <span style="color:#ff79c6">=</span> db.student.find();

<span style="color:#6272a4">//while(result.hasNext()){
</span><span style="color:#6272a4">//    printjson(result.next());
</span><span style="color:#6272a4">//}
</span><span style="color:#6272a4"></span>
result.forEach(element=&gt;printjson(element));
</code></pre></div><h3 id="条件操作符">条件操作符</h3>
<p>条件操作符用于比较两个表达式并从mongoDB集合中获取数据</p>
<h4 id="大于操作符">大于操作符</h4>
<p>查询age 大于 30的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({age<span style="color:#ff79c6">:</span>{$gt<span style="color:#ff79c6">:</span><span style="color:#bd93f9">30</span>}})
</code></pre></div><h4 id="大于等于操作符">大于等于操作符</h4>
<p>查询age 3大于等于30 的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({age<span style="color:#ff79c6">:</span> {$gte<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>}})
</code></pre></div><h4 id="小于操作符">小于操作符</h4>
<p>查询age 小于30的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({age<span style="color:#ff79c6">:</span> {$lt<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>}})
</code></pre></div><h4 id="小于等于操作符">小于等于操作符</h4>
<p>查询age 小于等于30的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({age<span style="color:#ff79c6">:</span> {$lte<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>}})
</code></pre></div><h4 id="同时使用-gte和lte">同时使用 <code>$gte</code>和<code>$lte</code></h4>
<p>实例 查询age 大于等于 30 并且 age 小于等于 50 的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({age<span style="color:#ff79c6">:</span> {$gte<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>, $lte<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">50</span>}})
</code></pre></div><h4 id="等于">等于</h4>
<p>查询age = 30的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({<span style="color:#f1fa8c">&#34;age&#34;</span><span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>})
</code></pre></div><h4 id="使用-_id进行查询">使用 _id进行查询</h4>
<p>实例 查询_id是 562af23062d5a57609133974 数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">&gt;</span> db.students.find({_id<span style="color:#ff79c6">:</span>ObjectId(<span style="color:#f1fa8c">&#34;5adb666ecd738e9771638985&#34;</span>)});
{ <span style="color:#f1fa8c">&#34;_id&#34;</span> <span style="color:#ff79c6">:</span> ObjectId(<span style="color:#f1fa8c">&#34;5adb666ecd738e9771638985&#34;</span>), <span style="color:#f1fa8c">&#34;name&#34;</span> <span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;zzzz&#34;</span> }
</code></pre></div><h4 id="查询结果集的条数">查询结果集的条数</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find().count()
</code></pre></div><h4 id="正则匹配">正则匹配</h4>
<p>实例 查询name里包含luke的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">/luke/</span>})
</code></pre></div><p>查询某个字段的值当中是否以另一个值开头</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">/^luke/</span>})
</code></pre></div><p>###与和或</p>
<h4 id="and">and</h4>
<p>find方法可以传入多个键(key)，每个键(key)以逗号隔开</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.find({key1<span style="color:#ff79c6">:</span>value1, key2<span style="color:#ff79c6">:</span>value2})
</code></pre></div><p>实例 查询name是luke并且age是1的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>})
</code></pre></div><h4 id="or">or</h4>
<p>语法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.find(
   {
      $or<span style="color:#ff79c6">:</span> [
   {key1<span style="color:#ff79c6">:</span> value1}, {key2<span style="color:#ff79c6">:</span>value2}
      ]
   }
)
</code></pre></div><p>实例 查询age = 30 或者 age = 50 的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({$or<span style="color:#ff79c6">:</span>[{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">30</span>},{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">50</span>}]})
</code></pre></div><h4 id="and和or联用">and和or联用</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collection_name.find(
   {
     key1<span style="color:#ff79c6">:</span>value1,
     key2<span style="color:#ff79c6">:</span>value2,
     $or<span style="color:#ff79c6">:</span> [
   {key1<span style="color:#ff79c6">:</span> value1},
   {key2<span style="color:#ff79c6">:</span>value2}
     ]
   }
)
</code></pre></div><p>实例 查询 name是luke 并且 age是30 或者 age是 50 的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find({name<span style="color:#ff79c6">:</span><span style="color:#f1fa8c">&#39;luke&#39;</span>,$or<span style="color:#ff79c6">:</span>[{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">30</span>},{age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">50</span>}]})
</code></pre></div><h3 id="分页查询">分页查询</h3>
<h4 id="limit">limit</h4>
<p>读取指定数量的数据记录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collectoin_name.find().limit(number)
</code></pre></div><p>参数</p>
<p>collectoin_name集合
number读取的条数
实例 查询前3条数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find().limit(<span style="color:#bd93f9">3</span>)
</code></pre></div><h4 id="skip">skip</h4>
<p>跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数 语法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collectoin_name.find().skip(number)
</code></pre></div><p>参数</p>
<p>collectoin_name集合
number跳过的条数
实例 查询3条以后的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find().skip(<span style="color:#bd93f9">3</span>)
</code></pre></div><h4 id="skiplimit">skip+limit</h4>
<p>通常用这种方式来实现分页功能 语法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collectoin_name.find().skip(skipNum).limit(limitNum)
</code></pre></div><p>参数</p>
<p>collectoin_name 集合名称
skipNum 跳过的条数
limitNum 限制返回的条数
实例 查询在4-6之间的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find().skip(<span style="color:#bd93f9">3</span>).limit(<span style="color:#bd93f9">3</span>);
</code></pre></div><h4 id="sort排序">sort排序</h4>
<p>sort()方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而-1是用于降序排列。 语法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.collectoin_name.find().sort({key<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>})
db.collectoin_name.find().sort({key<span style="color:#ff79c6">:-</span><span style="color:#bd93f9">1</span>})
</code></pre></div><p>参数</p>
<p>collectoin_name集合
key表示字段
实例 查询出并升序排序 {age:1} age表示按那个字段排序 1表示升序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.students.find().sort({age<span style="color:#ff79c6">:</span><span style="color:#bd93f9">1</span>})
</code></pre></div><ul class="pa0">
  
   <li class="list">
     <a href="/tags/database" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Database</a>
   </li>
  
   <li class="list">
     <a href="/tags/mongodb" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">MongoDB</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">What&#39;s in this posts</p>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#mongodb介绍">MongoDB介绍</a></li>
        <li><a href="#mongodb-基本概念">MongoDB 基本概念</a></li>
        <li><a href="#数据库操作">数据库操作</a></li>
        <li><a href="#runcommand">runCommand</a></li>
        <li><a href="#条件操作符">条件操作符</a></li>
        <li><a href="#分页查询">分页查询</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://goyth.cn/" >
    &copy;  GOYTH 2020 
  </a>
    <div>




<a href="https://twitter.com/goythz" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>





<a href="https://github.com/jsyt" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
